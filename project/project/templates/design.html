<!DOCTYPE html>
<html lang="en">
<head>
  {% block title %}<title>Design</title>{% endblock %}
    <!-- development version, includes helpful console warnings -->
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <!-- axios is a communication platform for vue to communicate to backend-->
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    {% load static %}

    <link rel="stylesheet" type="text/css" href="{% static 'global_css_classes.css' %}">

    <style>
        #all-cards-container{
            display: grid;
            grid-template-columns: repeat(13, 1fr);
        }
        #deck-cards-container{
            display: flex;
            background: aliceblue;
            padding: 5px;
            min-height: 97px;
            border-radius: 3px;
        }

    </style>

</head>
<body>
    <script>
        //preload cards into js with django. we can make this dynamic later with vue
        let card_list = {{ cards | safe }};
        let deck_cards = [];
        window.onload = function () {
            //vue setup. delimeters set to square brackets because django uses curly
            let selected_cards_vue = new Vue({
              delimiters: ['[[', ']]'],
              el: '#deck-cards-container',
              data: {
                  deck_cards: deck_cards
              },
              methods: {
                remove_card: function (card_index) {
                  deck_cards.splice(card_index,1);
                }
              }
            });

            let all_cards_vue = new Vue({
              delimiters: ['[[', ']]'],
              el: '#all-cards-container',
              data: {
                  card_list: card_list
              },
              methods: {
                add_card: function (card) {
                  deck_cards.push(card);
                }
              }
            });
        }
        function add_all(){
            debugger;
            //todo
        }
        function increment_all(){
            debugger;
            //todo
        }
    </script>
    <style>
        .card {
          display: inline-block;
        }

        .selected-card {
            margin-left: 2px;
        }
        .blank-card{
            height: 97px;
            width: 71px;
            background: beige;
            border-radius: 10px;
            border: 2px burlywood;
        }

        .displayed-card{
            margin-bottom: 5px;
            min-height: 97px;
        }

        .ace_clubs {
         width: 71px;
         height: 97px;
         background: url(http://dobsondev.com/wp-content/uploads/2015/04/windows-playing-cards.png) -2px -1px;
        }
    </style>

    {% block sidebar %}<!-- insert default navigation text for every page -->{% endblock %}
    {% block content %}
      <h1>design</h1>
        <div id="deck-cards-container">
            <div v-for="(card, index) in deck_cards" :class="'selected-card ' + card.media_class" v-on:click="remove_card(index)"></div>
        </div>
        <br>
        <div id="all-cards-container">
            <div style="grid-column: 1 / 14; display: flex;justify-content: space-around" class="displayed-card" >
                <div class="blank-card" onclick="add_all()">add one of each card</div>
                <div class="blank-card" onclick="increment_all()">add one of each added card</div>
            </div>
            <div v-for="card in card_list" :class="'displayed-card ' + card.media_class" v-on:click="add_card(card)" ></div>
        </div>
    {% endblock %}
</body>
</html>